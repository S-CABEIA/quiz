<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Angola Quiz Challenge 🇦🇴</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
        }
        
        .angola-gradient {
            background: linear-gradient(135deg, #dc2626 0%, #000000 50%, #fbbf24 100%);
        }

        .loader {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #fbbf24;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 10px auto;
            display: none;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style></head>
<body class="min-h-screen angola-gradient flex items-center justify-center p-4">
    <div class="max-w-4xl w-full">
        
        <!-- Tela de Coleta de Dados -->
        <div id="register-screen" class="text-center">
            <div class="bg-white/10 backdrop-blur-lg rounded-3xl p-8 shadow-2xl border border-white/20">
                <div class="text-6xl mb-4">🇦🇴</div>
                <h1 class="text-3xl font-bold text-white mb-4">Quiz FGC Team Angola</h1>
                <p class="text-lg text-white/90 mb-6">Para começar, por favor, insira seus dados:</p>
                
                <form id="register-form" class="space-y-4 text-left">
                    <div>
                        <label class="block text-white/90 text-sm font-medium mb-1">Nome Completo</label>
                        <input type="text" id="user-name" required
                               class="w-full px-4 py-3 rounded-xl bg-white/20 text-white placeholder-white/70 border border-white/30 focus:outline-none focus:ring-2 focus:ring-yellow-400"
                               placeholder="Ex: João Silva">
                    </div>
                    <div>
                        <label class="block text-white/90 text-sm font-medium mb-1">Número do WhatsApp (com código do país)</label>
                        <input type="tel" id="user-phone" required
                               class="w-full px-4 py-3 rounded-xl bg-white/20 text-white placeholder-white/70 border border-white/30 focus:outline-none focus:ring-2 focus:ring-yellow-400"
                               placeholder="Ex: +244 922 123 456" 
                               inputmode="tel"
                               autocomplete="tel"
                               pattern="^\+\d{1,3}(?:\s?\d){4,14}$"
                               title="Formato: +Código País e número (Ex: +244 922 123 456 ou +244922123456)">
                    </div>
                    <div id="loader" class="loader"></div>
                    <button type="submit" id="submit-btn"
                            class="w-full bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-4 px-8 rounded-2xl shadow-lg transform transition-all duration-200 hover:scale-105 mt-6">
                        Enviar e Começar Quiz 🚀
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Remove espaços antes de enviar para evitar falhas de validação
        document.getElementById('register-form').addEventListener('submit', function () {
            const phoneInput = document.getElementById('user-phone');
            phoneInput.value = phoneInput.value.replace(/\s+/g, '');
        });
    </script>
</body>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden">
            <div class="bg-white/10 backdrop-blur-lg rounded-3xl p-8 shadow-2xl border border-white/20">
                <div class="mb-6">
                    <div class="flex justify-between text-white/80 text-sm mb-2">
                        <span>Questão <span id="current-question">1</span> de <span id="total-questions">35</span></span>
                        <span>Pontuação: <span id="score">0</span></span>
                    </div>
                    <div class="w-full bg-white/20 rounded-full h-3">
                        <div id="progress-bar" class="bg-yellow-400 h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                </div>

                <div class="mb-4">
                    <span id="category-badge" class="inline-block bg-red-600 text-white px-4 py-2 rounded-full text-sm font-semibold">Angola</span>
                </div>

                <div class="mb-8">
                    <h2 id="question-text" class="text-2xl font-bold text-white mb-6 drop-shadow-lg">Qual é a capital de Angola?</h2>
                    <div id="answer-options" class="space-y-3"></div>
                </div>

                <div class="text-center">
                    <button id="next-btn" class="hidden bg-yellow-400 hover:bg-yellow-500 text-black font-semibold py-3 px-6 rounded-xl shadow-lg transform transition-all duration-200 hover:scale-105">
                        Próxima Questão →
                    </button>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="hidden text-center">
            <div class="bg-white/10 backdrop-blur-lg rounded-3xl p-8 shadow-2xl border border-white/20">
                <div id="results-emoji" class="text-6xl mb-4">🎉</div>
                <h2 class="text-4xl font-bold text-white mb-4">Quiz Completo!</h2>
                <div class="text-2xl text-white mb-6">
                    Sua Pontuação: <span id="final-score" class="text-yellow-400 font-bold">0</span>/35
                </div>
                <div id="performance-message" class="text-xl text-white/90 mb-6">Ótimo trabalho, Team Angola! 🇦🇴</div>
                <button id="restart-btn" class="bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-4 px-8 rounded-2xl shadow-lg transform transition-all duration-200 hover:scale-105">
                    Jogar Novamente 🔄
                </button>
            </div>
        </div>
    </div>

    <script>
        // 🔧 CONFIGURE AQUI SEUS DADOS DO EMAILJS
        const EMAILJS_USER_ID = "SEU_USER_ID";      // Ex: "user_xxxxxxxxx"
        const EMAILJS_SERVICE_ID = "SEU_SERVICE_ID"; // Ex: "service_xxxxxx"
        const EMAILJS_TEMPLATE_ID = "SEU_TEMPLATE_ID"; // Template com {{message}} e anexo

        // Inicializa o EmailJS
        (function() {
            emailjs.init(EMAILJS_USER_ID);
        })();

        // Carregar participantes do localStorage
        function getParticipants() {
            const saved = localStorage.getItem("quizParticipants");
            return saved ? JSON.parse(saved) : [];
        }

        // Salvar novo participante
        function addParticipant(name, phone) {
            const list = getParticipants();
            list.push({ Nome: name, WhatsApp: phone, Data: new Date().toLocaleString() });
            localStorage.setItem("quizParticipants", JSON.stringify(list));
        }

        // Gerar Excel e enviar por e-mail
        function sendExcelEmail(name, phone) {
            const participants = getParticipants();
            const ws = XLSX.utils.json_to_sheet(participants);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, "Participantes");

            // Gerar base64 do arquivo
            const wbout = XLSX.write(wb, { bookType: 'xlsx', type: 'base64' });

            // Parâmetros do e-mail
            const params = {
                to_email: "siaodongoxi@gmail.com",
                from_name: "Quiz FGC Team Angola",
                message: `Novo participante: ${name} (${phone})\n\nTodos os dados estão no anexo Excel.`,
                file_name: "Participantes_Quiz_FGC_Angola.xlsx",
                file_content: wbout
            };

            // Enviar via EmailJS
            emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, params)
                .then(() => {
                    alert("Dados enviados com sucesso! Obrigado por participar.");
                })
                .catch((error) => {
                    console.error("Erro ao enviar e-mail:", error);
                    alert("Erro ao enviar dados, mas você pode continuar o quiz.");
                });
        }

        // Evento de envio
        document.getElementById("register-form").addEventListener("submit", function (e) {
            e.preventDefault();
            const name = document.getElementById("user-name").value.trim();
            const phone = document.getElementById("user-phone").value.trim();

            if (!name || !phone) {
                alert("Por favor, preencha todos os campos.");
                return;
            }

            // Validar formato do telefone
            if (!/^\+\d{1,3} \d{3} \d{3} \d{3}$/.test(phone)) {
                alert("Por favor, insira o número no formato correto: +Código País Número (Ex: +244 922 123 456)");
                return;
            }

            // Mostrar carregamento
            document.getElementById("loader").style.display = "block";
            document.getElementById("submit-btn").disabled = true;
            document.getElementById("submit-btn").textContent = "Enviando...";

            // Salvar participante
            addParticipant(name, phone);

            // Enviar e-mail com Excel
            sendExcelEmail(name, phone);

            // Ir para o quiz após 2 segundos (mesmo que falhe)
            setTimeout(() => {
                document.getElementById("register-screen").classList.add("hidden");
                document.getElementById("quiz-screen").classList.remove("hidden");
                loadQuestion();
            }, 2000);
        });

        // --- QUIZ LOGIC ---
        const questions = [
            // ========== ANGOLA (15 perguntas) ==========
            { 
                category: "Angola", 
                question: "Qual é a capital de Angola?", 
                options: [
                    "Luanda (sede do governo e maior cidade)",
                    "Benguela (importante porto histórico)",
                    "Huambo (centro agrícola e industrial)",
                    "Lubango (cidade das estátuas)"
                ], 
                correct: 0
            },
            { 
                category: "Angola", 
                question: "Quantas províncias tem Angola?", 
                options: [
                    "15 províncias",
                    "18 províncias",
                    "20 províncias",
                    "25 províncias"
                ], 
                correct: 1
            },
            { 
                category: "Angola", 
                question: "Qual é a moeda oficial de Angola?", 
                options: [
                    "Kwanza (dividido em 100 cêntimos)",
                    "Dólar angolano",
                    "Escudo angolano",
                    "Franco CFA"
                ], 
                correct: 0
            },
            { 
                category: "Angola", 
                question: "Qual destes é um prato típico angolano?", 
                options: [
                    "Muamba de galinha (com dendê e quiabo)",
                    "Feijoada brasileira",
                    "Cuscuz marroquino",
                    "Bobó de camarão"
                ], 
                correct: 0
            },
            { 
                category: "Angola", 
                question: "Quando Angola celebrou sua independência?", 
                options: [
                    "11 de Novembro de 1975",
                    "4 de Fevereiro de 1961",
                    "10 de Dezembro de 1956",
                    "1 de Junho de 1979"
                ], 
                correct: 0
            },
            { 
                category: "Angola", 
                question: "Qual é o ponto mais alto de Angola?", 
                options: [
                    "Morro do Moco (2.620 metros)",
                    "Serra da Leba (1.800 metros)",
                    "Pico do Azevedo (2.400 metros)",
                    "Monte Bongo (2.300 metros)"
                ], 
                correct: 0
            },
            { 
                category: "Angola", 
                question: "Qual destes é um parque nacional angolano?", 
                options: [
                    "Parque Nacional da Kissama",
                    "Parque Kruger",
                    "Serengeti",
                    "Etosha"
                ], 
                correct: 0
            },
            { 
                category: "Angola", 
                question: "Qual rio forma parte da fronteira norte de Angola?", 
                options: [
                    "Rio Congo (mais profundo do mundo)",
                    "Rio Zambeze",
                    "Rio Okavango",
                    "Rio Kunene"
                ], 
                correct: 0
            },
            { 
                category: "Angola", 
                question: "Qual destes é um artista musical angolano famoso?", 
                options: [
                    "Anselmo Ralph (rei do kizomba)",
                    "Wizkid (nigeriano)",
                    "Davido (afrobeat)",
                    "Burna Boy (grammy winner)"
                ], 
                correct: 0
            },
            { 
                category: "Angola", 
                question: "Qual destes minerais Angola NÃO exporta em grande quantidade?", 
                options: [
                    "Petróleo (principal exportação)",
                    "Diamantes (2° maior produtor África)",
                    "Urânio (reservas significativas)",
                    "Carvão mineral (pouca produção)"
                ], 
                correct: 3
            },
            { 
                category: "Angola", 
                question: "Qual destes é um time de futebol angolano?", 
                options: [
                    "Petro de Luanda (mais titulado)",
                    "Kaizer Chiefs",
                    "Al Ahly",
                    "TP Mazembe"
                ], 
                correct: 0
            },
            { 
                category: "Angola", 
                question: "Qual destas línguas NÃO é falada em Angola?", 
                options: [
                    "Umbundo (mais falada depois do português)",
                    "Kimbundo (região de Luanda)",
                    "Kikongo (norte do país)",
                    "Swahili (não é comum em Angola)"
                ], 
                correct: 3
            },
            { 
                category: "Angola", 
                question: "Qual destes é um símbolo nacional de Angola?", 
                options: [
                    "Palanca Negra Gigante (antílope raro)",
                    "Leão (símbolo de força)",
                    "Elefante (maior animal terrestre)",
                    "Guepardo (mais rápido)"
                ], 
                correct: 0
            },
            { 
                category: "Angola", 
                question: "Qual destas é uma dança tradicional angolana?", 
                options: [
                    "Rebita (dança urbana de Luanda)",
                    "Kizomba (originária de Angola)",
                    "Semba (raiz da samba brasileira)",
                    "Kuduro (estilo moderno angolano)"
                ], 
                correct: 0
            },
            { 
                category: "Angola", 
                question: "Qual destes presidentes NÃO governou Angola?", 
                options: [
                    "Agostinho Neto (1° presidente)",
                    "José Eduardo dos Santos (mais tempo no poder)",
                    "João Lourenço (atual presidente)",
                    "Nelson Mandela (foi da África do Sul)"
                ], 
                correct: 3
            },

            // ========== FGC (5 perguntas) ==========
            { 
                category: "FGC", 
                question: "O que significa a sigla FGC?", 
                options: [
                    "Fórum de Gestão do Conhecimento",
                    "Federação Geral do Comércio",
                    "Fundo Garantidor de Crédito",
                    "Faculdade de Gestão Corporativa"
                ], 
                correct: 0
            },
            { 
                category: "FGC", 
                question: "Qual é o principal objetivo do FGC?", 
                options: [
                    "Promover desenvolvimento através da educação",
                    "Organizar eventos esportivos nacionais",
                    "Gerenciar recursos naturais do país",
                    "Fiscalizar instituições financeiras"
                ], 
                correct: 0
            },
            { 
                category: "FGC", 
                question: "Em que ano foi criado o FGC?", 
                options: [
                    "2015",
                    "2018",
                    "2020",
                    "2022"
                ], 
                correct: 1
            },
            { 
                category: "FGC", 
                question: "Qual destes projetos está associado ao FGC?", 
                options: [
                    "Programa de bolsas de estudo",
                    "Construção de estádios",
                    "Exploração de petróleo",
                    "Produção de café"
                ], 
                correct: 0
            },
            { 
                category: "FGC", 
                question: "O FGC está vinculado a qual setor?", 
                options: [
                    "Educação e capacitação",
                    "Mineração e recursos",
                    "Agricultura e pecuária",
                    "Transporte e logística"
                ], 
                correct: 0
            },

            // ========== INOVAÇÃO (5 perguntas) ==========
            { 
                category: "Inovação", 
                question: "Qual destes é um hub de inovação em Angola?", 
                options: [
                    "Fábrica de Sabão (Luanda)",
                    "Kamba Hub (Benguela)",
                    "Makers Lab (Huambo)",
                    "Tech Park (Lubango)"
                ], 
                correct: 0
            },
            { 
                category: "Inovação", 
                question: "Qual startup angolana ganhou destaque internacional?", 
                options: [
                    "Kamba (logística inteligente)",
                    "Zap (pagamentos digitais)",
                    "Movicel (telecomunicações)",
                    "Sonangol (petróleo)"
                ], 
                correct: 0
            },
            { 
                category: "Inovação", 
                question: "O que significa 'Agrotech'?", 
                options: [
                    "Inovação tecnológica aplicada à agricultura",
                    "Tecnologia para extração mineral",
                    "Sistema de gestão de tráfego",
                    "Plataforma de educação online"
                ], 
                correct: 0
            },
            { 
                category: "Inovação", 
                question: "Qual destes NÃO é um desafio para inovação em Angola?", 
                options: [
                    "Falta de acesso à internet",
                    "Escassez de talentos qualificados",
                    "Excesso de financiamento disponível",
                    "Burocracia para novos negócios"
                ], 
                correct: 2
            },
            { 
                category: "Inovação", 
                question: "Qual universidade angolana tem foco em tecnologia?", 
                options: [
                    "Universidade Óscar Ribas",
                    "Instituto Superior Politécnico de Tecnologias",
                    "Universidade Katyavala Bwila",
                    "Universidade José Eduardo dos Santos"
                ], 
                correct: 1
            },

            // ========== ROBÓTICA (5 perguntas) ==========
            { 
                category: "Robótica", 
                question: "O que significa CANAR?", 
                options: [
                    "Campeonato Nacional de Robótica",
                    "Comitê Angolano de Novas Arquiteturas",
                    "Centro de Aprendizagem em Robótica",
                    "Conselho de Automação e Robótica"
                ], 
                correct: 0
            },
            { 
                category: "Robótica", 
                question: "Qual linguagem é mais usada na robótica educacional?", 
                options: [
                    "Python (simples e versátil)",
                    "Arduino (baseado em C++)",
                    "Java (para sistemas complexos)",
                    "JavaScript (para web)"
                ], 
                correct: 1
            },
            { 
                category: "Robótica", 
                question: "Qual sensor é essencial para robôs seguidores de linha?", 
                options: [
                    "Sensor de temperatura",
                    "Sensor infravermelho",
                    "Sensor de umidade",
                    "Sensor de pressão"
                ], 
                correct: 1
            },
            { 
                category: "Robótica", 
                question: "O que é um 'maker space'?", 
                options: [
                    "Espaço com ferramentas para criação tecnológica",
                    "Fábrica de robôs industriais",
                    "Laboratório de inteligência artificial",
                    "Centro de pesquisa espacial"
                ], 
                correct: 0
            },
            { 
                category: "Robótica", 
                question: "Qual competição internacional inspirou o CANAR?", 
                options: [
                    "FIRST Robotics Competition",
                    "RoboCup (futebol de robôs)",
                    "DARPA Challenge",
                    "Olympíada de Robótica"
                ], 
                correct: 0
            },

            // ========== PODER DA JUVENTUDE (5 perguntas) ==========
            { 
                category: "Juventude", 
                question: "Qual porcentagem da população angolana tem menos de 25 anos?", 
                options: [
                    "Cerca de 40%",
                    "Cerca de 60%",
                    "Cerca de 75%",
                    "Cerca de 85%"
                ], 
                correct: 1
            },
            { 
                category: "Juventude", 
                question: "Qual destes é um desafio para jovens angolanos?", 
                options: [
                    "Acesso limitado à educação",
                    "Excesso de oportunidades",
                    "Baixa taxa de natalidade",
                    "Envelhecimento populacional"
                ], 
                correct: 0
            },
            { 
                category: "Juventude", 
                question: "Qual destes projetos empodera jovens em Angola?", 
                options: [
                    "Programa Jovem Empreendedor",
                    "Plano Nacional de Mineração",
                    "Projeto de Infraestrutura Rodoviária",
                    "Expansão da Indústria Petrolífera"
                ], 
                correct: 0
            },
            { 
                category: "Juventude", 
                question: "Que percentual de jovens angolanos usa internet?", 
                options: [
                    "Menos de 20%",
                    "Cerca de 35%",
                    "Mais de 50%",
                    "Quase 80%"
                ], 
                correct: 1
            },
            { 
                category: "Juventude", 
                question: "Qual destas habilidades é mais valorizada no mercado?", 
                options: [
                    "Capacidade de inovação",
                    "Conhecimento tradicional",
                    "Habilidades manuais",
                    "Experiência em agricultura"
                ], 
                correct: 0
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;

        function loadQuestion() {
            const q = questions[currentQuestionIndex];
            document.getElementById("current-question").textContent = currentQuestionIndex + 1;
            document.getElementById("total-questions").textContent = questions.length;
            document.getElementById("score").textContent = score;
            document.getElementById("category-badge").textContent = q.category;
            document.getElementById("question-text").textContent = q.question;

            // Atualizar barra de progresso
            const progress = ((currentQuestionIndex) / questions.length) * 100;
            document.getElementById("progress-bar").style.width = `${progress}%`;

            const optionsContainer = document.getElementById("answer-options");
            optionsContainer.innerHTML = '';
            q.options.forEach((opt, idx) => {
                const btn = document.createElement("button");
                btn.className = "w-full bg-white/20 hover:bg-white/30 text-white font-semibold py-4 px-6 rounded-xl shadow-lg text-left";
                btn.textContent = opt;
                btn.onclick = () => {
                    // Lógica de resposta
                    optionsContainer.querySelectorAll('button').forEach(b => b.disabled = true);
                    if (idx === q.correct) {
                        btn.classList.replace('bg-white/20', 'bg-green-500');
                        score++;
                        document.getElementById("score").textContent = score;
                    } else {
                        btn.classList.replace('bg-white/20', 'bg-red-500');
                        // Mostrar qual era a correta
                        optionsContainer.children[q.correct].classList.replace('bg-white/20', 'bg-green-500');
                    }
                    setTimeout(() => document.getElementById("next-btn").classList.remove("hidden"), 1000);
                };
                optionsContainer.appendChild(btn);
            });

            document.getElementById("next-btn").classList.add("hidden");
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            document.getElementById("quiz-screen").classList.add("hidden");
            document.getElementById("results-screen").classList.remove("hidden");
            document.getElementById("final-score").textContent = score;
            const msg = document.getElementById("performance-message");
            const pct = (score / questions.length) * 100;
            if (pct >= 90) msg.textContent = "Incrível! Você é um expert completo! 🇦🇴";
            else if (pct >= 75) msg.textContent = "Excelente! Conhecimento impressionante! 🇦🇴";
            else if (pct >= 50) msg.textContent = "Bom trabalho! Continue aprendendo! 🇦🇴";
            else msg.textContent = "Você pode melhorar! O conhecimento é poder! 🇦🇴";
        }

        document.getElementById("next-btn").addEventListener("click", nextQuestion);
        document.getElementById("restart-btn").addEventListener("click", () => {
            currentQuestionIndex = 0;
            score = 0;
            document.getElementById("results-screen").classList.add("hidden");
            document.getElementById("register-screen").classList.remove("hidden");
            document.getElementById("register-form").reset();
        });

        // Inicializar
        window.onload = () => {
            if (!localStorage.getItem("quizParticipants")) {
                localStorage.setItem("quizParticipants", JSON.stringify([]));
            }
        };
    </script>
</body>
</html>

